<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>基于PWA的渐进式应用</title>
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
	<img src="images/1.jpg" />
	<script src="js/index.js"></script>
	<script>
		// 本地起一个服务: http-server  建议清缓存方式启动 http-server -c-1

		// const w = new Worker('mywork.js')
		// w.postMessage('hi')
		// w.onmessage = function(e){
		// 	console.log(e.data)
		// }
		if('ServiceWorker' in window){
			console.log('当前控制权', navigator.serviceWorker.controller)
			// 注册PWA
			navigator.serviceWorker.register('./sw.js')
			.then(function(regist){
				console.log('serviceWork 登记成功', regist.scope)//http://localhost:8080/
			})
			.catch(function(err){
				console.log('serviceWork 登记失败', err)
			})
		}
	</script>
</body>
</html>